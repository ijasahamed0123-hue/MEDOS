<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body class="text-slate-800 antialiased selection:bg-teal-200 selection:text-teal-900">

    <div id="view-login" class="view-section active w-full h-screen !flex items-center justify-center fixed inset-0 z-50 !pb-0" style="background: radial-gradient(circle at center, #F0FDFA, #CCFBF1);">
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div class="absolute -top-24 -left-24 w-96 h-96 bg-teal-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
            <div class="absolute top-0 -right-4 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>
            <div class="absolute -bottom-8 left-20 w-72 h-72 bg-pink-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"></div>
        </div>

        <div class="bg-white/60 backdrop-blur-2xl p-10 rounded-[2.5rem] shadow-2xl w-full max-w-sm flex flex-col items-center gap-6 border border-white/50 relative z-10 animate-[popIn_0.8s_ease-out]">
            
            <div class="w-20 h-20 bg-gradient-to-br from-teal-400 to-teal-600 rounded-2xl flex items-center justify-center mb-1 shadow-xl shadow-teal-500/30 transform hover:scale-110 transition-transform duration-500 cursor-pointer group">
                <i class="fas fa-plus text-4xl text-white group-hover:animate-[bounce-small_1s_infinite]"></i>
            </div>
            
            <div class="text-center">
                <h2 class="text-3xl font-black text-slate-800 tracking-tight mb-1">MedOS</h2>
                <p class="text-slate-500 text-xs font-bold tracking-widest uppercase">Next Gen Hospital System</p>
            </div>
            
            <div class="w-full flex flex-col gap-4">
                <div class="relative group">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <i class="fas fa-user text-teal-500/50 group-focus-within:text-teal-600 transition-colors text-lg"></i>
                    </div>
                    <input type="text" id="login-id" placeholder="Admin ID" class="custom-input pl-11 bg-white/50 focus:bg-white">
                </div>
                <div class="relative group">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <i class="fas fa-lock text-teal-500/50 group-focus-within:text-teal-600 transition-colors text-lg"></i>
                    </div>
                    <input type="password" id="login-pass" placeholder="Password" class="custom-input pl-11 bg-white/50 focus:bg-white">
                </div>
            </div>

            <button onclick="handleLogin()" class="w-full bg-gradient-to-r from-teal-500 to-teal-700 hover:from-teal-600 hover:to-teal-800 text-white font-bold py-3.5 rounded-xl shadow-xl shadow-teal-500/20 transform transition-all hover:-translate-y-1 active:scale-95 text-sm uppercase tracking-wider flex items-center justify-center gap-2 group">
                <span>Secure Login</span> <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
            </button>
            
            <p class="text-[10px] text-slate-400 font-medium">Restricted Access • v3.1</p>
        </div>
    </div>

    <div id="app-wrapper" class="hidden app-container">
        
        <nav class="nav-container z-20 sticky top-0 px-6 py-3">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
                <div class="flex items-center gap-3 mr-8 hidden md:flex cursor-pointer hover:scale-105 transition-transform">
                    <div class="w-9 h-9 bg-gradient-to-br from-teal-400 to-teal-600 rounded-lg flex items-center justify-center text-white font-bold shadow-lg shadow-teal-500/30">
                        <i class="fas fa-plus text-sm"></i>
                    </div>
                    <span class="font-extrabold text-slate-800 text-lg tracking-tight">MedOS</span>
                </div>

                <div class="flex-1 overflow-x-auto custom-scrollbar pb-1 md:pb-0">
                    <div class="flex flex-nowrap justify-start gap-2" id="nav-container">
                        <a onclick="navigateTo('home')" class="nav-pill px-4 py-2.5" id="nav-home"><i class="fas fa-chart-pie mr-2"></i> Dashboard</a>
                        <a onclick="navigateTo('emergency')" class="nav-pill px-4 py-2.5" id="nav-emergency"><i class="fas fa-bolt text-rose-500 mr-2"></i> Emergency</a>
                        <a onclick="navigateTo('new-patient')" class="nav-pill px-4 py-2.5" id="nav-new-patient"><i class="fas fa-user-plus text-teal-600 mr-2"></i> Register</a>
                        <a onclick="navigateTo('existing-patient')" class="nav-pill px-4 py-2.5" id="nav-existing-patient"><i class="fas fa-folder-open text-blue-500 mr-2"></i> Records</a>
                        <a onclick="navigateTo('doctors')" class="nav-pill px-4 py-2.5" id="nav-doctors"><i class="fas fa-user-md text-indigo-500 mr-2"></i> Staff</a>
                        <a onclick="navigateTo('pharmacy')" class="nav-pill px-4 py-2.5" id="nav-pharmacy"><i class="fas fa-pills text-purple-500 mr-2"></i> Pharmacy</a>
                        <a onclick="navigateTo('attendance')" class="nav-pill px-4 py-2.5" id="nav-attendance"><i class="fas fa-fingerprint text-orange-500 mr-2"></i> Attendance</a>
                        <a onclick="navigateTo('billing')" class="nav-pill px-4 py-2.5" id="nav-billing"><i class="fas fa-receipt text-emerald-500 mr-2"></i> Finance</a>
                        <a onclick="navigateTo('patient-list')" class="nav-pill px-4 py-2.5" id="nav-patient-list"><i class="fas fa-list-ol text-slate-500 mr-2"></i> Queue</a>
                        <a onclick="navigateTo('profile')" class="nav-pill px-4 py-2.5" id="nav-profile"><i class="fas fa-cog text-gray-500 mr-2"></i> Admin</a>
                    </div>
                </div>
                
                <button onclick="openLogoutConfirm()" class="ml-4 w-10 h-10 flex items-center justify-center rounded-xl bg-white hover:bg-rose-50 text-slate-400 hover:text-rose-500 transition-all shadow-sm hover:shadow-md border border-slate-100 group">
                    <i class="fas fa-power-off text-sm group-hover:scale-110 transition-transform"></i>
                </button>
            </div>
        </nav>

        <main class="flex-1 relative overflow-hidden">
            <div class="h-full overflow-y-auto p-3 md:p-5 custom-scrollbar">
                <div class="max-w-7xl mx-auto pb-10">

                    <div id="view-home" class="view-section">
                        <div class="mb-6 flex items-center justify-between">
                            <div>
                                <h2 class="text-3xl font-black text-slate-800 tracking-tight">Dashboard</h2>
                                <p class="text-slate-500 font-medium text-sm mt-0.5">Real-time Hospital Analytics</p>
                            </div>
                            <div class="text-right hidden sm:block">
                                <p class="text-sm font-bold text-teal-600" id="current-date-display">Today</p>
                                <p class="text-[10px] text-slate-400 uppercase tracking-wide font-bold">System Online</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-5 mb-6">
                            <div class="info-card border-l-4 border-teal-500 group">
                                <div class="absolute right-0 top-0 opacity-5 transform translate-x-2 -translate-y-2 transition-transform group-hover:scale-110">
                                    <i class="fas fa-user-plus text-8xl"></i>
                                </div>
                                <div class="relative z-10">
                                    <div class="flex justify-between items-start mb-2">
                                        <div class="bg-teal-50 p-2 rounded-lg text-teal-600">
                                            <i class="fas fa-user-plus"></i>
                                        </div>
                                        <span class="text-[10px] font-bold bg-teal-50 text-teal-600 px-2 py-0.5 rounded-full">New</span>
                                    </div>
                                    <h3 class="text-3xl font-bold text-slate-800" id="stat-total-today">0</h3>
                                    <p class="text-xs font-bold text-slate-400 uppercase tracking-wide">Registrations</p>
                                </div>
                            </div>
                            
                            <div class="info-card border-l-4 border-orange-500 group">
                                <div class="absolute right-0 top-0 opacity-5 transform translate-x-2 -translate-y-2 transition-transform group-hover:scale-110">
                                    <i class="fas fa-clock text-8xl"></i>
                                </div>
                                <div class="relative z-10">
                                    <div class="flex justify-between items-start mb-2">
                                        <div class="bg-orange-50 p-2 rounded-lg text-orange-600">
                                            <i class="fas fa-clock"></i>
                                        </div>
                                        <span class="text-[10px] font-bold bg-orange-50 text-orange-600 px-2 py-0.5 rounded-full">Live</span>
                                    </div>
                                    <h3 class="text-3xl font-bold text-slate-800" id="stat-waiting">0</h3>
                                    <p class="text-xs font-bold text-slate-400 uppercase tracking-wide">Pending Queue</p>
                                </div>
                            </div>

                            <div class="info-card border-l-4 border-blue-500 group">
                                <div class="absolute right-0 top-0 opacity-5 transform translate-x-2 -translate-y-2 transition-transform group-hover:scale-110">
                                    <i class="fas fa-user-md text-8xl"></i>
                                </div>
                                <div class="relative z-10">
                                    <div class="flex justify-between items-start mb-2">
                                        <div class="bg-blue-50 p-2 rounded-lg text-blue-600">
                                            <i class="fas fa-user-md"></i>
                                        </div>
                                        <div class="flex -space-x-1">
                                            <div class="w-5 h-5 rounded-full bg-slate-200 border-2 border-white"></div>
                                            <div class="w-5 h-5 rounded-full bg-slate-300 border-2 border-white"></div>
                                        </div>
                                    </div>
                                    <h3 class="text-3xl font-bold text-slate-800 flex items-baseline gap-1">
                                        <span id="stat-doctors-present">0</span>
                                        <span class="text-sm text-slate-400 font-normal">/ <span id="stat-total-doctors">0</span></span>
                                    </h3>
                                    <p class="text-xs font-bold text-slate-400 uppercase tracking-wide">Doctors Active</p>
                                </div>
                            </div>

                            <div class="info-card border-l-4 border-emerald-500 group">
                                <div class="absolute right-0 top-0 opacity-5 transform translate-x-2 -translate-y-2 transition-transform group-hover:scale-110">
                                    <i class="fas fa-coins text-8xl"></i>
                                </div>
                                <div class="relative z-10">
                                    <div class="flex justify-between items-start mb-2">
                                        <div class="bg-emerald-50 p-2 rounded-lg text-emerald-600">
                                            <i class="fas fa-rupee-sign"></i>
                                        </div>
                                        <span class="text-[10px] font-bold bg-emerald-50 text-emerald-600 px-2 py-0.5 rounded-full">INR</span>
                                    </div>
                                    <h3 class="text-3xl font-bold text-slate-800" id="stat-revenue">₹0</h3>
                                    <p class="text-xs font-bold text-slate-400 uppercase tracking-wide">Total Revenue</p>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-6">
                            <div class="info-card min-h-[350px] flex flex-col">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="font-bold text-slate-700 text-base">Patient Demographics</h3>
                                </div>
                                <div class="flex-1 relative flex items-center justify-center">
                                    <canvas id="chart-patient-status"></canvas>
                                </div>
                            </div>

                            <div class="info-card min-h-[350px] flex flex-col">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="font-bold text-slate-700 text-base">Financial Overview</h3>
                                </div>
                                <div class="flex-1 relative">
                                    <canvas id="chart-finance"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex gap-4">
                            <button onclick="navigateTo('emergency')" class="flex-1 bg-gradient-to-r from-rose-500 to-pink-600 text-white p-6 rounded-2xl shadow-lg shadow-rose-500/20 hover:shadow-xl hover:shadow-rose-500/30 hover:-translate-y-1 transition-all group relative overflow-hidden border border-white/20">
                                <div class="absolute right-0 top-0 opacity-10 transform translate-x-8 -translate-y-4 transition-transform group-hover:scale-110 duration-700">
                                    <i class="fas fa-ambulance text-8xl"></i>
                                </div>
                                <div class="relative z-10 flex items-center justify-center gap-4">
                                    <div class="bg-white/20 p-3 rounded-full backdrop-blur-sm shadow-inner">
                                        <i class="fas fa-bolt text-2xl group-hover:animate-pulse"></i>
                                    </div>
                                    <div class="text-left">
                                        <h3 class="text-xl font-black tracking-tight">Emergency Console</h3>
                                        <p class="text-rose-100 text-sm font-medium">Immediate Admission & Critical Care Unit</p>
                                    </div>
                                    <div class="bg-white/20 px-3 py-1.5 rounded-lg backdrop-blur-md ml-auto">
                                        <i class="fas fa-arrow-right"></i>
                                    </div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <div id="view-emergency" class="view-section">
                        <div class="flex justify-between items-center mb-6">
                            <div class="flex items-center gap-3">
                                <div class="bg-gradient-to-br from-rose-500 to-pink-600 p-3 rounded-xl shadow-lg shadow-rose-200">
                                    <i class="fas fa-bolt text-2xl text-white animate-pulse"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold text-slate-800">Emergency</h2>
                                    <p class="text-slate-500 font-medium text-xs">Critical Patient Management</p>
                                </div>
                            </div>
                            <button onclick="safeToggle('add-emergency-modal', false)" class="btn-primary bg-rose-500 hover:bg-rose-600 px-6 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2 shadow-lg shadow-rose-200 hover:shadow-rose-300">
                                <i class="fas fa-plus-circle"></i> Quick Admit
                            </button>
                        </div>
                        
                        <div class="panel-surface min-h-[600px] border-t-4 border-rose-500 relative">
                            <div class="mb-4 w-full md:w-1/2 relative group">
                                 <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                     <i class="fas fa-search text-rose-300 group-focus-within:text-rose-500 transition-colors"></i>
                                 </div>
                                 <input type="text" placeholder="Search Emergency Patients..." onkeyup="filterPatients(this.value, 'emergency')" class="custom-input pl-10 border-rose-100 focus:border-rose-300 focus:shadow-rose-100">
                            </div>

                            <div class="rounded-xl overflow-hidden border border-slate-200 shadow-sm">
                                <table class="custom-table">
                                    <thead>
                                        <tr>
                                            <th class="w-20">Token</th>
                                            <th>Patient Name</th>
                                            <th>Age/Gender</th>
                                            <th>Chief Complaint</th>
                                            <th class="text-center">Priority</th>
                                            <th class="text-center">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="emergency-list-body">
                                        </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="view-pharmacy" class="view-section">
                        <div class="flex justify-between items-center mb-6">
                            <div class="flex items-center gap-3">
                                <div class="bg-gradient-to-br from-purple-500 to-indigo-600 p-3 rounded-xl shadow-lg shadow-indigo-200">
                                    <i class="fas fa-pills text-2xl text-white"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold text-slate-800">Pharmacy</h2>
                                    <p class="text-slate-500 font-medium text-xs">Inventory & Stock</p>
                                </div>
                            </div>
                            <button onclick="safeToggle('add-medicine-modal', false)" class="btn-primary px-6 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2">
                                <i class="fas fa-box-open"></i> Add Stock
                            </button>
                        </div>
                        
                        <div class="panel-surface min-h-[600px]">
                            <div class="rounded-xl overflow-hidden border border-slate-200">
                                <table class="custom-table">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Medicine Name</th>
                                            <th>Details</th>
                                            <th>Price (₹)</th>
                                            <th>Stock Qty</th>
                                            <th>Expiry Date</th>
                                            <th class="text-center w-32">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="pharmacy-table-body">
                                        </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="view-new-patient" class="view-section">
                        <div class="mb-6 flex items-center gap-3">
                            <div class="bg-gradient-to-br from-teal-400 to-teal-600 p-3 rounded-xl shadow-lg shadow-teal-200">
                                <i class="fas fa-user-plus text-2xl text-white"></i>
                            </div>
                            <div>
                                <h2 class="text-2xl font-bold text-slate-800">Registration</h2>
                                <p class="text-slate-500 font-medium text-xs">Admit New Patient</p>
                            </div>
                        </div>
                        
                        <div class="panel-surface shadow-xl bg-white/90 backdrop-blur-2xl border border-white/60">
                            <form id="new-patient-form" onsubmit="savePatient(event)">
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-5 mb-5">
                                    
                                    <div class="md:col-span-4 border-b border-slate-200 pb-1 mb-1 flex items-center gap-2">
                                        <i class="fas fa-id-card text-teal-500"></i>
                                        <h3 class="text-xs font-extrabold text-slate-700 uppercase tracking-wider">Personal Details</h3>
                                    </div>

                                    <div class="md:col-span-1">
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">First Name</label>
                                        <input type="text" name="firstName" required class="custom-input">
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">Last Name</label>
                                        <input type="text" name="lastName" required class="custom-input">
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">Date of Birth</label>
                                        <input type="date" id="input-dob" name="dob" onchange="calculateAge()" required class="custom-input text-sm text-slate-600">
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">Age</label>
                                        <input type="number" id="input-age" name="age" oninput="calculateDobFromAge()" class="custom-input font-bold text-center bg-teal-50/80 border-teal-200 text-teal-800 focus:border-teal-500" placeholder="Auto">
                                    </div>

                                    <div class="md:col-span-1">
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">Guardian Name</label>
                                        <input type="text" name="fatherName" class="custom-input">
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">Mobile Number</label>
                                        <input type="number" name="mobile" required class="custom-input" placeholder="Numbers Only">
                                    </div>
                                    
                                    <div class="md:col-span-2 bg-slate-50 p-4 rounded-xl border border-slate-200 shadow-inner">
                                        <div class="flex items-center gap-2 mb-2">
                                            <i class="fas fa-heartbeat text-rose-400"></i>
                                            <span class="text-xs font-bold text-slate-400 uppercase">Basic Vitals</span>
                                        </div>
                                        <div class="grid grid-cols-3 gap-3">
                                            <div>
                                                <label class="block text-[10px] font-bold text-slate-400 mb-1 text-center uppercase">Height (cm)</label>
                                                <input type="number" name="height" oninput="calculateBMI()" class="custom-input text-center !bg-white shadow-sm h-10">
                                            </div>
                                            <div>
                                                <label class="block text-[10px] font-bold text-slate-400 mb-1 text-center uppercase">Weight (kg)</label>
                                                <input type="number" name="weight" oninput="calculateBMI()" class="custom-input text-center !bg-white shadow-sm h-10">
                                            </div>
                                            <div>
                                                <label class="block text-[10px] font-bold text-slate-400 mb-1 text-center uppercase">BMI</label>
                                                <input type="text" name="bmi" readonly class="custom-input opacity-80 text-center font-bold !bg-slate-200 !border-transparent h-10">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="md:col-span-2">
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">Full Address</label>
                                        <textarea name="address" rows="2" class="custom-input custom-textarea"></textarea>
                                    </div>
                                    
                                    <div class="md:col-span-2">
                                        <div class="flex justify-between items-end mb-1">
                                            <label class="block text-xs font-bold text-slate-500 ml-1 uppercase tracking-wide">Presenting Symptoms</label>
                                        </div>
                                        <textarea id="input-symptoms" name="symptoms" rows="2" class="custom-input custom-textarea" placeholder="e.g. fever, headache..."></textarea>
                                    </div>

                                    <div class="md:col-span-4 border-b border-slate-200 pb-1 mb-1 mt-2 flex items-center gap-2">
                                        <i class="fas fa-hospital text-teal-500"></i>
                                        <h3 class="text-xs font-extrabold text-slate-700 uppercase tracking-wider">Admission Details</h3>
                                    </div>

                                    <div class="md:col-span-1">
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">Ward/Room</label>
                                        <div class="relative">
                                            <select name="ward" class="custom-input cursor-pointer appearance-none">
                                                <option value="OPD">OPD (Outpatient)</option>
                                                <option value="General Ward">General Ward</option>
                                                <option value="Private Room">Private Room</option>
                                                <option value="ICU">ICU</option>
                                                <option value="Emergency">Emergency</option>
                                            </select>
                                            <i class="fas fa-chevron-down absolute right-4 top-3.5 text-slate-400 pointer-events-none"></i>
                                        </div>
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">Assign Doctor</label>
                                        <div class="relative">
                                            <select name="doctor" id="doctor-select" class="custom-input cursor-pointer appearance-none">
                                                <option value="">Select Doctor</option>
                                            </select>
                                            <i class="fas fa-chevron-down absolute right-4 top-3.5 text-slate-400 pointer-events-none"></i>
                                        </div>
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">Fee (₹)</label>
                                        <input type="number" name="initialFee" class="custom-input font-bold text-slate-700" placeholder="0">
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">Initial Status</label>
                                        <div class="relative">
                                            <select name="status" class="custom-input cursor-pointer appearance-none">
                                                <option value="Waiting">Waiting Area</option>
                                                <option value="Consulted">Consulted</option>
                                                <option value="Admitted">Admitted</option>
                                            </select>
                                            <i class="fas fa-chevron-down absolute right-4 top-3.5 text-slate-400 pointer-events-none"></i>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex items-center justify-end gap-3 border-t border-slate-100 pt-5">
                                    <button type="button" onclick="clearForm()" class="btn-secondary font-bold py-2.5 px-6 rounded-xl shadow-sm hover:shadow-md transition-all text-sm">
                                        <i class="fas fa-eraser mr-1"></i> Clear
                                    </button>
                                    <button type="submit" class="btn-primary font-bold py-2.5 px-8 rounded-xl shadow-lg hover:shadow-teal-500/40 hover:-translate-y-1 transition-all text-sm">
                                        <i class="fas fa-save mr-1"></i> Register
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div id="view-existing-patient" class="view-section">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold text-slate-800">Records</h2>
                            <p class="text-slate-500 font-medium text-xs">Patient Database</p>
                        </div>
                        
                        <div class="panel-surface min-h-[600px]">
                            <div class="mb-4 w-full md:w-1/2 relative group">
                                 <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                     <i class="fas fa-search text-slate-400 group-focus-within:text-teal-500 transition-colors"></i>
                                 </div>
                                 <input type="text" placeholder="Search Records..." onkeyup="filterPatients(this.value, 'existing')" class="custom-input pl-10 group-focus-within:shadow-md">
                            </div>

                            <div class="rounded-xl overflow-hidden border border-slate-200">
                                <div class="overflow-x-auto">
                                    <table class="custom-table">
                                        <thead>
                                            <tr>
                                                <th class="w-24">ID</th>
                                                <th>Patient Name</th>
                                                <th>Ward</th>
                                                <th>Contact</th>
                                                <th class="text-center">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="existing-patient-table-body">
                                            </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="view-doctors" class="view-section">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-800">Staff</h2>
                                <p class="text-slate-500 font-medium text-xs">Doctors & Specialists</p>
                            </div>
                            <button onclick="safeToggle('add-doctor-modal', false)" class="btn-primary px-6 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2">
                                <i class="fas fa-plus"></i> Add Doctor
                            </button>
                        </div>
                        
                        <div class="panel-surface min-h-[600px]">
                            <div class="rounded-xl overflow-hidden border border-slate-200">
                                <table class="custom-table">
                                   <thead>
                                       <tr>
                                           <th class="w-24">ID</th>
                                           <th>Name</th>
                                           <th>Dept/Qual</th>
                                           <th>Schedule</th>
                                           <th>Status</th>
                                           <th>Contact</th>
                                           <th class="text-center w-20">Remove</th>
                                       </tr>
                                   </thead>
                                   <tbody id="doctor-table-body">
                                       </tbody>
                               </table>
                            </div>
                        </div>
                    </div>

                    <div id="view-attendance" class="view-section">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold text-slate-800">Attendance</h2>
                            <p class="text-slate-500 font-medium text-xs">Daily Status Tracking</p>
                        </div>
                        
                        <div class="panel-surface min-h-[600px]">
                            <div class="rounded-xl overflow-hidden border border-slate-200">
                                <table class="custom-table">
                                    <thead>
                                        <tr>
                                            <th class="pl-6">Doctor Name</th>
                                            <th class="w-40 text-center">Current Status</th>
                                            <th class="text-center">Mark Attendance</th>
                                        </tr>
                                    </thead>
                                    <tbody id="attendance-table-body">
                                        </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="view-billing" class="view-section">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-800">Finance</h2>
                                <p class="text-slate-500 font-medium text-xs">Invoices & Billing</p>
                            </div>
                            <button onclick="openManualBillModal()" class="btn-primary px-6 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2">
                                <i class="fas fa-plus"></i> Create Invoice
                            </button>
                        </div>
                        
                        <div class="panel-surface min-h-[600px]">
                            <div class="rounded-xl overflow-hidden border border-slate-200">
                                <table class="custom-table">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Patient</th>
                                            <th>Date</th>
                                            <th>Description</th>
                                            <th>Amount (₹)</th>
                                            <th>Method</th>
                                            <th>Status</th>
                                            <th class="text-center">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="billing-table-body">
                                        </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="view-patient-list" class="view-section">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold text-slate-800">Queue</h2>
                            <p class="text-slate-500 font-medium text-xs">Patient Flow</p>
                        </div>
                        
                        <div class="panel-surface min-h-[600px]">
                            <div class="rounded-xl overflow-hidden border border-slate-200">
                                <table class="custom-table">
                                    <thead>
                                        <tr>
                                            <th class="w-20">Token</th>
                                            <th>Patient Name</th>
                                            <th>Assigned To</th>
                                            <th class="w-40 text-center">Queue Status</th>
                                            <th class="w-20 text-center">Remove</th>
                                        </tr>
                                    </thead>
                                    <tbody id="patient-list-table-body">
                                        </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="view-profile" class="view-section">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold text-slate-800">Profile</h2>
                            <p class="text-slate-500 font-medium text-xs">Admin Controls</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            <div class="panel-surface border-t-4 border-teal-500">
                                <h3 class="text-lg font-bold text-slate-700 mb-4 flex items-center gap-2">
                                    <i class="fas fa-user-plus text-teal-500"></i> Create New Admin
                                </h3>
                                <form onsubmit="event.preventDefault(); requestAuth(() => createNewAdmin(event))" class="space-y-4">
                                    <div>
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">New Admin ID</label>
                                        <input type="text" name="newAdminId" required class="custom-input" placeholder="Enter ID">
                                    </div>
                                    <div>
                                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">New Password</label>
                                        <input type="password" name="newAdminPass" required class="custom-input" placeholder="Enter Password">
                                    </div>
                                    <div class="pt-2">
                                        <button type="submit" class="btn-primary w-full font-bold py-2.5 rounded-xl shadow-lg text-sm">
                                            Create Admin Account
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <div class="flex flex-col gap-5">
                                <div class="panel-surface border-t-4 border-slate-500">
                                    <h3 class="text-lg font-bold text-slate-700 mb-4 flex items-center gap-2">
                                        <i class="fas fa-id-badge text-slate-500"></i> Current Session
                                    </h3>
                                    <div class="bg-slate-50 p-4 rounded-2xl border border-slate-200 text-center relative overflow-hidden">
                                        <div class="w-16 h-16 bg-white rounded-full mx-auto flex items-center justify-center mb-2 shadow-lg text-teal-600 relative z-10">
                                            <i class="fas fa-user-tie text-2xl"></i>
                                        </div>
                                        <p class="text-slate-400 text-[10px] uppercase tracking-wide mb-0.5 font-bold">Logged in as</p>
                                        <h4 class="text-2xl font-black text-slate-800" id="current-admin-display">Administrator</h4>
                                        <div class="inline-block mt-2 px-3 py-1 rounded-full bg-green-100 text-green-700 text-[10px] font-bold border border-green-200">
                                            <i class="fas fa-circle text-[6px] mr-1 animate-pulse"></i> Session Active
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="panel-surface border-t-4 border-slate-500">
                                    <h3 class="text-lg font-bold text-slate-700 mb-4 flex items-center gap-2"><i class="fas fa-cogs text-slate-500"></i> Hospital Settings</h3>
                                    <div class="space-y-3">
                                        <div><label class="block text-xs font-bold text-slate-500 mb-1">Hospital Name</label><input type="text" id="conf-hosp-name" class="custom-input" placeholder="e.g. City General Hospital"></div>
                                        <div><label class="block text-xs font-bold text-slate-500 mb-1">Location/Address</label><input type="text" id="conf-hosp-addr" class="custom-input" placeholder="e.g. 123 Main St, New York"></div>
                                        <div class="flex gap-2">
                                            <button onclick="requestAuth(() => saveHospitalConfig())" class="flex-1 btn-secondary py-2.5 rounded-xl text-xs font-bold mt-1 hover:bg-slate-100">Save Config</button>
                                            <button onclick="downloadBackup()" class="flex-1 bg-indigo-500 hover:bg-indigo-600 text-white py-2.5 rounded-xl text-xs font-bold mt-1 shadow-lg"><i class="fas fa-download mr-1"></i> Export Data</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-5 panel-surface border-t-4 border-teal-500">
                            <h3 class="text-lg font-bold text-slate-700 mb-4 flex items-center gap-2">
                                <i class="fas fa-users-cog text-teal-500"></i> Registered Administrators
                            </h3>
                            <div class="rounded-xl overflow-hidden border border-slate-200">
                                <table class="custom-table">
                                    <thead>
                                        <tr>
                                            <th class="w-16">#</th>
                                            <th>Admin ID</th>
                                            <th>Status</th>
                                            <th>Role</th>
                                            <th class="text-center w-20">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="admin-list-body">
                                        </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <div id="add-medicine-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
            <div class="bg-teal-600 px-6 py-4 flex justify-between items-center shadow-md">
                <h3 class="text-lg font-bold text-white"><i class="fas fa-pills mr-2"></i> Add Medicine</h3>
                <button onclick="safeToggle('add-medicine-modal', true)" class="text-white/80 hover:text-white">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div class="p-6">
                <form onsubmit="saveMedicine(event)" class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Medicine Name</label>
                        <input type="text" name="medName" required class="custom-input">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Category</label>
                            <select name="medCategory" class="custom-input">
                                <option value="Tablet">Tablet</option>
                                <option value="Syrup">Syrup</option>
                                <option value="Injection">Injection</option>
                                <option value="Capsule">Capsule</option>
                                <option value="Cream">Cream</option>
                                <option value="Drops">Drops</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Price (₹)</label>
                            <input type="number" name="medPrice" required class="custom-input">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Manufacturer</label>
                            <input type="text" name="medManuf" class="custom-input" placeholder="e.g. Pfizer">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Batch No</label>
                            <input type="text" name="medBatch" class="custom-input" placeholder="B-1234">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Dosage</label>
                        <input type="text" name="medDose" class="custom-input" placeholder="e.g. 500mg, 5ml">
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Stock Quantity</label>
                            <input type="number" name="medStock" required class="custom-input">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Expiry Date</label>
                            <input type="date" name="medExpiry" required class="custom-input">
                        </div>
                    </div>
                    
                    <div class="pt-2 flex justify-end gap-3 border-t border-slate-100 mt-2">
                        <button type="button" onclick="safeToggle('add-medicine-modal', true)" class="px-5 py-2 text-slate-500 hover:bg-slate-50 rounded-xl font-bold transition-colors text-sm">Cancel</button>
                        <button type="submit" class="btn-primary px-6 py-2 rounded-xl font-bold shadow-lg text-sm">Save Medicine</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="edit-medicine-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
            <div class="bg-teal-600 px-6 py-4 flex justify-between items-center shadow-md">
                <h3 class="text-lg font-bold text-white"><i class="fas fa-pills mr-2"></i> Edit Medicine</h3>
                <button onclick="safeToggle('edit-medicine-modal', true)" class="text-white/80 hover:text-white">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div class="p-6">
                <form onsubmit="event.preventDefault(); requestAuth(() => updateMedicineDetails())" class="space-y-4">
                    <input type="hidden" id="edit-med-id">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Medicine Name</label>
                        <input type="text" id="edit-med-name" required class="custom-input">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Category</label>
                            <select id="edit-med-category" class="custom-input">
                                <option value="Tablet">Tablet</option>
                                <option value="Syrup">Syrup</option>
                                <option value="Injection">Injection</option>
                                <option value="Capsule">Capsule</option>
                                <option value="Cream">Cream</option>
                                <option value="Drops">Drops</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Price (₹)</label>
                            <input type="number" id="edit-med-price" required class="custom-input">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Manufacturer</label>
                            <input type="text" id="edit-med-manuf" class="custom-input" placeholder="e.g. Pfizer">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Batch No</label>
                            <input type="text" id="edit-med-batch" class="custom-input" placeholder="B-1234">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Dosage</label>
                        <input type="text" id="edit-med-dose" class="custom-input" placeholder="e.g. 500mg, 5ml">
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Stock Quantity</label>
                            <input type="number" id="edit-med-stock" required class="custom-input">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Expiry Date</label>
                            <input type="date" id="edit-med-expiry" required class="custom-input">
                        </div>
                    </div>
                    
                    <div class="pt-2 flex justify-end gap-3 border-t border-slate-100 mt-2">
                        <button type="button" onclick="safeToggle('edit-medicine-modal', true)" class="px-5 py-2 text-slate-500 hover:bg-slate-50 rounded-xl font-bold transition-colors text-sm">Cancel</button>
                        <button type="submit" class="btn-primary px-6 py-2 rounded-xl font-bold shadow-lg text-sm">Update Medicine</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="add-doctor-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
            <div class="bg-teal-600 px-6 py-4 flex justify-between items-center shadow-md">
                <h3 class="text-lg font-bold text-white">Add New Staff</h3>
                <button onclick="safeToggle('add-doctor-modal', true)" class="text-white/80 hover:text-white">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div class="p-6">
                <form onsubmit="saveDoctor(event)" class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Doctor Name (String)</label>
                        <input type="text" name="docName" required class="custom-input">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Department</label>
                            <select name="docDept" class="custom-input">
                                <option value="General">General</option>
                                <option value="Cardiology">Cardiology</option>
                                <option value="Neurology">Neurology</option>
                                <option value="Pediatrics">Pediatrics</option>
                                <option value="Orthopedics">Orthopedics</option>
                                <option value="Dental">Dental</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Qualification (String)</label>
                            <input type="text" name="docQual" required placeholder="e.g. MBBS" class="custom-input">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Duty Schedule (Options)</label>
                            <div class="relative">
                                <select name="docDays" class="custom-input cursor-pointer appearance-none">
                                    <option value="Mon - Fri">Mon - Fri</option>
                                    <option value="Mon - Sat">Mon - Sat</option>
                                    <option value="Daily">Daily</option>
                                    <option value="Weekends">Weekends Only</option>
                                    <option value="On Call">On Call</option>
                                    <option value="Night Shift">Night Shift</option>
                                </select>
                                <i class="fas fa-chevron-down absolute right-4 top-3.5 text-slate-400 pointer-events-none"></i>
                            </div>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Time (Options)</label>
                            <div class="relative">
                                <select name="docTime" class="custom-input cursor-pointer appearance-none">
                                    <option value="09:00 AM - 05:00 PM">09:00 AM - 05:00 PM</option>
                                    <option value="08:00 AM - 04:00 PM">08:00 AM - 04:00 PM</option>
                                    <option value="10:00 AM - 06:00 PM">10:00 AM - 06:00 PM</option>
                                    <option value="07:00 AM - 03:00 PM">07:00 AM - 03:00 PM</option>
                                    <option value="02:00 PM - 10:00 PM">02:00 PM - 10:00 PM</option>
                                    <option value="08:00 PM - 08:00 AM">08:00 PM - 08:00 AM (Night)</option>
                                    <option value="Flexible / On Call">Flexible / On Call</option>
                                </select>
                                <i class="fas fa-chevron-down absolute right-4 top-3.5 text-slate-400 pointer-events-none"></i>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Mobile No (Integer)</label>
                            <input type="number" name="docMobile" required class="custom-input" placeholder="Numbers Only">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Initial Status</label>
                            <div class="relative">
                                <select name="docStatus" class="custom-input cursor-pointer">
                                    <option value="Present">Present</option>
                                    <option value="Absent">Absent</option>
                                </select>
                                <i class="fas fa-chevron-down absolute right-4 top-3.5 text-slate-400 pointer-events-none"></i>
                            </div>
                        </div>
                    </div>
                    <div class="pt-2 flex justify-end gap-3 border-t border-slate-100 mt-2">
                        <button type="button" onclick="safeToggle('add-doctor-modal', true)" class="px-5 py-2 text-slate-500 hover:bg-slate-50 rounded-xl font-bold transition-colors text-sm">Cancel</button>
                        <button type="submit" class="btn-primary px-6 py-2 rounded-xl font-bold shadow-lg text-sm">Add Staff</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="edit-doctor-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
            <div class="bg-teal-600 px-6 py-4 flex justify-between items-center shadow-md">
                <h3 class="text-lg font-bold text-white">Edit Staff Details</h3>
                <button onclick="safeToggle('edit-doctor-modal', true)" class="text-white/80 hover:text-white">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div class="p-6">
                <form onsubmit="event.preventDefault(); requestAuth(() => updateDoctorDetails())" class="space-y-4">
                    <input type="hidden" id="edit-doc-id">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Doctor Name (String)</label>
                        <input type="text" id="edit-doc-name" required class="custom-input">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Department</label>
                            <select id="edit-doc-dept" class="custom-input">
                                <option value="General">General</option>
                                <option value="Cardiology">Cardiology</option>
                                <option value="Neurology">Neurology</option>
                                <option value="Pediatrics">Pediatrics</option>
                                <option value="Orthopedics">Orthopedics</option>
                                <option value="Dental">Dental</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Qualification (String)</label>
                            <input type="text" id="edit-doc-qual" required class="custom-input">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Duty Schedule</label>
                            <div class="relative">
                                <select id="edit-doc-days" class="custom-input cursor-pointer appearance-none">
                                    <option value="Mon - Fri">Mon - Fri</option>
                                    <option value="Mon - Sat">Mon - Sat</option>
                                    <option value="Daily">Daily</option>
                                    <option value="Weekends">Weekends Only</option>
                                    <option value="On Call">On Call</option>
                                    <option value="Night Shift">Night Shift</option>
                                </select>
                                <i class="fas fa-chevron-down absolute right-4 top-3.5 text-slate-400 pointer-events-none"></i>
                            </div>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Time</label>
                            <div class="relative">
                                <select id="edit-doc-time" class="custom-input cursor-pointer appearance-none">
                                    <option value="09:00 AM - 05:00 PM">09:00 AM - 05:00 PM</option>
                                    <option value="08:00 AM - 04:00 PM">08:00 AM - 04:00 PM</option>
                                    <option value="10:00 AM - 06:00 PM">10:00 AM - 06:00 PM</option>
                                    <option value="07:00 AM - 03:00 PM">07:00 AM - 03:00 PM</option>
                                    <option value="02:00 PM - 10:00 PM">02:00 PM - 10:00 PM</option>
                                    <option value="08:00 PM - 08:00 AM">08:00 PM - 08:00 AM (Night)</option>
                                    <option value="Flexible / On Call">Flexible / On Call</option>
                                </select>
                                <i class="fas fa-chevron-down absolute right-4 top-3.5 text-slate-400 pointer-events-none"></i>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Mobile No (Integer)</label>
                            <input type="number" id="edit-doc-mobile" required class="custom-input" placeholder="Numbers Only">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Status</label>
                            <div class="relative">
                                <select id="edit-doc-status" class="custom-input cursor-pointer">
                                    <option value="Present">Present</option>
                                    <option value="Absent">Absent</option>
                                </select>
                                <i class="fas fa-chevron-down absolute right-4 top-3.5 text-slate-400 pointer-events-none"></i>
                            </div>
                        </div>
                    </div>
                    <div class="pt-2 flex justify-end gap-3 border-t border-slate-100 mt-2">
                        <button type="button" onclick="safeToggle('edit-doctor-modal', true)" class="px-5 py-2 text-slate-500 hover:bg-slate-50 rounded-xl font-bold transition-colors text-sm">Cancel</button>
                        <button type="submit" class="btn-primary px-6 py-2 rounded-xl font-bold shadow-lg text-sm">Update Staff</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="add-emergency-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
            <div class="bg-rose-500 px-6 py-4 flex justify-between items-center shadow-md">
                <h3 class="text-lg font-bold text-white"><i class="fas fa-bolt mr-2"></i> Quick Admit</h3>
                <button onclick="safeToggle('add-emergency-modal', true)" class="text-white/80 hover:text-white">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div class="p-6">
                <form onsubmit="saveEmergencyPatient(event)" class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Patient Name</label>
                        <input type="text" name="emName" required class="custom-input">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Age</label>
                            <input type="number" name="emAge" required class="custom-input">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Gender</label>
                            <select name="emGender" class="custom-input">
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Chief Complaint</label>
                        <textarea name="emComplaint" rows="2" required class="custom-input custom-textarea"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Priority</label>
                        <select name="emPriority" class="custom-input">
                            <option value="Critical" class="text-red-600 font-bold">Critical (Immediate)</option>
                            <option value="High" class="text-orange-600 font-bold">High (Urgent)</option>
                            <option value="Medium" class="text-yellow-600 font-bold">Medium (Standard)</option>
                        </select>
                    </div>
                    
                    <div class="pt-2 flex justify-end gap-3 border-t border-slate-100 mt-2">
                        <button type="button" onclick="safeToggle('add-emergency-modal', true)" class="px-5 py-2 text-slate-500 hover:bg-slate-50 rounded-xl font-bold text-sm">Cancel</button>
                        <button type="submit" class="bg-rose-500 hover:bg-rose-600 text-white px-6 py-2 rounded-xl font-bold shadow-lg shadow-rose-200 text-sm">Admit Patient</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
<div id="edit-emergency-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
        <div class="bg-rose-600 px-6 py-4 flex justify-between items-center shadow-md">
            <h3 class="text-lg font-bold text-white"><i class="fas fa-bolt mr-2"></i> Edit Emergency Record</h3>
            <button onclick="safeToggle('edit-emergency-modal', true)" class="text-white/80 hover:text-white">
                <i class="fas fa-times fa-lg"></i>
            </button>
        </div>
        <div class="p-6">
            <form onsubmit="event.preventDefault(); requestAuth(() => updateEmergencyDetails())" class="space-y-4">
                <input type="hidden" id="edit-em-id">
                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Patient Name</label>
                    <input type="text" id="edit-em-name" required class="custom-input">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Age</label>
                        <input type="number" id="edit-em-age" required class="custom-input">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Gender</label>
                        <select id="edit-em-gender" class="custom-input">
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Chief Complaint</label>
                    <textarea id="edit-em-complaint" rows="2" required class="custom-input custom-textarea"></textarea>
                </div>
                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Priority</label>
                    <select id="edit-em-priority" class="custom-input">
                        <option value="Critical" class="text-red-600 font-bold">Critical (Immediate)</option>
                        <option value="High" class="text-orange-600 font-bold">High (Urgent)</option>
                        <option value="Medium" class="text-yellow-600 font-bold">Medium (Standard)</option>
                    </select>
                </div>
                
                <div class="pt-2 flex justify-end gap-3 border-t border-slate-100 mt-2">
                    <button type="button" onclick="safeToggle('edit-emergency-modal', true)" class="px-5 py-2 text-slate-500 hover:bg-slate-50 rounded-xl font-bold text-sm">Cancel</button>
                    <button type="submit" class="bg-rose-600 hover:bg-rose-700 text-white px-6 py-2 rounded-xl font-bold shadow-lg shadow-rose-200 text-sm">Update Record</button>
                </div>
            </form>
        </div>
    </div>
</div>
    <div id="add-bill-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
            <div class="bg-slate-800 px-6 py-4 flex justify-between items-center shadow-md">
                <h3 class="text-lg font-bold text-white">Create New Invoice</h3>
                <button onclick="safeToggle('add-bill-modal', true)" class="text-white/80 hover:text-white">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div class="p-6">
                <form onsubmit="saveManualBill(event)" class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Select Patient</label>
                        <select name="billPatientId" id="bill-patient-select" required class="custom-input" onchange="autoFillFees()">
                            <option value="">Choose Patient...</option>
                            </select>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Doctor Fee (₹)</label>
                            <input type="number" id="bill-doc-fee" class="custom-input" placeholder="0" oninput="calculateTotalBill()">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Calculated Total</label>
                            <div class="bg-slate-100 rounded-xl p-2.5 text-right font-bold text-xl text-teal-700" id="bill-display-total">₹0</div>
                            <input type="hidden" name="billAmount" id="bill-amount-hidden">
                        </div>
                    </div>

                    <div class="bg-slate-50 p-4 rounded-2xl border border-slate-200">
                        <label class="block text-xs font-bold text-teal-600 mb-2 uppercase tracking-wide">Add Medicines</label>
                        <div class="flex gap-2 mb-2">
                            <select id="bill-med-select" class="custom-input flex-1">
                                <option value="">Select Medicine...</option>
                                </select>
                            <input type="number" id="bill-med-qty" class="custom-input w-20" placeholder="Qty" value="1">
                            <button type="button" onclick="addMedicineToBill()" class="btn-primary w-10 rounded-xl flex items-center justify-center">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <ul id="bill-med-list" class="text-sm space-y-1 max-h-32 overflow-y-auto">
                            </ul>
                    </div>
                    
                    <div class="pt-2 flex justify-end gap-3 border-t border-slate-100 mt-2">
                        <button type="button" onclick="safeToggle('add-bill-modal', true)" class="px-5 py-2 text-slate-500 hover:bg-slate-50 rounded-xl font-bold text-sm">Cancel</button>
                        <button type="submit" class="btn-primary px-6 py-2 rounded-xl font-bold shadow-lg text-sm">Generate</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div id="payment-modal" class="hidden fixed inset-0 modal-backdrop z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-sm overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-emerald-500">
            <div class="bg-emerald-600 px-6 py-4 flex justify-between items-center shadow-md">
                <h3 class="text-lg font-bold text-white"><i class="fas fa-credit-card mr-2"></i> Confirm Payment</h3>
                <button onclick="safeToggle('payment-modal', true)" class="text-white/80 hover:text-white">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div class="p-6">
                <p class="text-xs text-slate-500 mb-0.5">Invoice ID</p>
                <p class="text-xl font-mono font-bold text-slate-800 mb-4" id="pay-inv-id">INV-000000</p>
                
                <p class="text-xs text-slate-500 mb-0.5">Total Amount</p>
                <h2 class="text-3xl font-bold text-emerald-600 mb-6" id="pay-amount-display">₹0</h2>
                
                <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Payment Method</label>
                <select id="payment-method-select" class="custom-input mb-6 border-emerald-200">
                    <option value="Cash">Cash</option>
                    <option value="Credit Card">Credit Card</option>
                    <option value="Debit Card">Debit Card</option>
                    <option value="UPI">UPI / QR Code</option>
                    <option value="Insurance">Insurance Claim</option>
                </select>
                
                <div class="flex gap-2">
                    <button onclick="window.print()" class="flex-1 bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold py-3 rounded-xl transition-all text-sm"><i class="fas fa-print"></i> Print</button>
                    <button onclick="confirmPayment()" class="flex-[2] bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-emerald-200 transition-all flex items-center justify-center gap-2 text-sm">
                        <i class="fas fa-check-circle"></i> Mark as Paid
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="password-verify-modal" class="hidden fixed inset-0 modal-backdrop z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-[fadeScale_0.3s_ease-out] border-2 border-slate-800">
            <div class="bg-slate-800 px-6 py-3 flex justify-between items-center">
                <h3 class="text-sm font-bold text-white"><i class="fas fa-lock mr-2 text-teal-400"></i> Admin Verification</h3>
                <button onclick="closePasswordModal()" class="text-white hover:text-gray-300"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-5">
                <p class="text-xs text-slate-600 mb-3">Please enter your admin password to continue.</p>
                <input type="password" id="verify-admin-pass" class="custom-input mb-4" placeholder="Password">
                <div class="flex justify-end gap-2">
                    <button onclick="closePasswordModal()" class="btn-secondary px-4 py-1.5 rounded-lg text-xs font-bold">Cancel</button>
                    <button onclick="submitPasswordVerify()" class="btn-primary px-4 py-1.5 rounded-lg text-xs font-bold">Verify</button>
                </div>
            </div>
        </div>
    </div>

    <div id="edit-bill-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
            <div class="bg-slate-800 px-6 py-4 flex justify-between items-center shadow-md">
                <h3 class="text-lg font-bold text-white">Edit Invoice</h3>
                <button onclick="safeToggle('edit-bill-modal', true)" class="text-white/80 hover:text-white">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div class="p-6">
                <form onsubmit="event.preventDefault(); requestAuth(() => updateBillDetails())" class="space-y-4">
                    <input type="hidden" id="edit-bill-id">
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Invoice ID</label>
                            <input type="text" id="edit-bill-display-id" readonly class="custom-input bg-slate-100 text-slate-500 cursor-not-allowed">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Patient Name</label>
                            <input type="text" id="edit-bill-patient" readonly class="custom-input bg-slate-100 text-slate-500 cursor-not-allowed">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Description</label>
                        <textarea id="edit-bill-desc" rows="2" class="custom-input custom-textarea"></textarea>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Base/Doctor Fee (₹)</label>
                            <input type="number" id="edit-bill-doc-fee" class="custom-input" oninput="calculateEditBillTotal()">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Total Amount (₹)</label>
                            <input type="number" id="edit-bill-amount" readonly class="custom-input bg-slate-100 font-bold text-teal-700">
                        </div>
                    </div>

                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Status</label>
                        <select id="edit-bill-status" class="custom-input">
                            <option value="Pending">Pending</option>
                            <option value="Paid">Paid</option>
                        </select>
                    </div>

                    <div class="bg-slate-50 p-4 rounded-2xl border border-slate-200">
                        <label class="block text-xs font-bold text-teal-600 mb-2 uppercase tracking-wide">Add Medicines</label>
                        <div class="flex gap-2 mb-2">
                            <select id="edit-bill-med-select" class="custom-input flex-1">
                                <option value="">Select Medicine...</option>
                                </select>
                            <input type="number" id="edit-bill-med-qty" class="custom-input w-20" placeholder="Qty" value="1">
                            <button type="button" onclick="addMedicineToEditBill()" class="btn-primary w-10 rounded-xl flex items-center justify-center">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <ul id="edit-bill-med-list" class="text-sm space-y-1 max-h-32 overflow-y-auto">
                            </ul>
                    </div>
                    
                    <div class="pt-2 flex justify-end gap-3 border-t border-slate-100 mt-2">
                        <button type="button" onclick="safeToggle('edit-bill-modal', true)" class="px-5 py-2 text-slate-500 hover:bg-slate-50 rounded-xl font-bold text-sm">Cancel</button>
                        <button type="submit" class="btn-primary px-6 py-2 rounded-xl font-bold shadow-lg text-sm">Update Invoice</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div id="edit-patient-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-2xl overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
            <div class="bg-teal-600 px-6 py-4 flex justify-between items-center shadow-md">
                <h3 class="text-lg font-bold text-white">Record Editor</h3>
                <button onclick="safeToggle('edit-patient-modal', true)" class="text-white/80 hover:text-white">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div class="p-6 max-h-[85vh] overflow-y-auto custom-scrollbar">
                <form onsubmit="event.preventDefault(); requestAuth(() => updatePatientDetails())" class="space-y-5">
                    <input type="hidden" id="edit-detail-id">
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Patient Name</label>
                            <input type="text" id="edit-detail-name" required class="custom-input">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Mobile Contact (Integer)</label>
                            <input type="number" id="edit-detail-mobile" class="custom-input" placeholder="Numbers Only">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Address</label>
                        <textarea id="edit-detail-address" rows="2" class="custom-input custom-textarea"></textarea>
                    </div>

                    <div class="bg-slate-50 p-4 rounded-xl border border-slate-100">
                        <label class="block text-xs font-bold text-teal-600 mb-1 uppercase tracking-wide">Prescriptions</label>
                        <textarea id="edit-detail-prescriptions" rows="2" class="custom-input custom-textarea bg-white" placeholder="List medications here..."></textarea>
                    </div>

                    <div class="bg-slate-50 p-4 rounded-xl border border-slate-100">
                        <label class="block text-xs font-bold text-teal-600 mb-1 uppercase tracking-wide">Medical History & Symptoms</label>
                        
                        <div id="symptoms-history" class="bg-white p-3 rounded-lg border border-slate-100 text-sm text-slate-600 mb-3 max-h-32 overflow-y-auto whitespace-pre-wrap leading-relaxed shadow-sm"></div>
                        
                        <label class="block text-xs font-bold text-slate-400 mb-1 ml-1">Add New Note</label>
                        <div class="flex gap-2">
                             <input type="text" id="new-symptom-entry" class="custom-input bg-white" placeholder="Type observation...">
                             <button type="button" onclick="appendSymptom()" class="bg-teal-600 text-white px-4 rounded-xl hover:bg-teal-700 shadow-md transition-all">
                                 <i class="fas fa-plus"></i>
                             </button>
                        </div>
                    </div>
                    
                    <div class="pt-2 flex justify-end gap-3 border-t border-slate-100">
                        <button type="button" onclick="safeToggle('edit-patient-modal', true)" class="px-5 py-2 text-slate-500 hover:bg-slate-50 rounded-xl font-bold transition-colors text-sm">Close</button>
                        <button type="submit" class="btn-primary px-6 py-2 rounded-xl font-bold shadow-lg text-sm">Update</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="confirm-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-sm overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
            <div class="p-6 text-center">
                <div class="w-14 h-14 bg-red-100 text-red-500 rounded-full flex items-center justify-center mx-auto mb-3 text-xl">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800 mb-1">Confirm Deletion</h3>
                <p class="text-slate-500 text-xs mb-6 leading-relaxed">Are you sure you want to remove this record? This action cannot be undone.</p>
                <div class="flex justify-center gap-2">
                    <button onclick="closeConfirmModal()" class="px-5 py-2 text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-xl font-bold transition-colors text-sm">Cancel</button>
                    <button onclick="requestAuth(() => executeDeletion())" class="px-5 py-2 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold shadow-lg shadow-red-200 transition-all text-sm">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <div id="logout-confirm-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-sm overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
            <div class="p-6 text-center">
                <div class="w-14 h-14 bg-slate-100 text-slate-600 rounded-full flex items-center justify-center mx-auto mb-3 text-xl">
                    <i class="fas fa-sign-out-alt"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800 mb-1">End Session</h3>
                <p class="text-slate-500 text-xs mb-6">Are you sure you want to logout?</p>
                <div class="flex justify-center gap-2">
                    <button onclick="closeLogoutConfirm()" class="px-5 py-2 text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-xl font-bold transition-colors text-sm">Cancel</button>
                    <button onclick="executeLogout()" class="px-5 py-2 bg-slate-800 hover:bg-black text-white rounded-xl font-bold shadow-lg transition-all text-sm">Logout</button>
                </div>
            </div>
        </div>
    </div>

    <div id="summary-modal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-2xl overflow-hidden animate-[fadeScale_0.3s_ease-out] border border-white/50">
            <div class="bg-slate-800 px-6 py-4 flex justify-between items-center shadow-md no-print">
                <h3 class="text-lg font-bold text-white flex items-center gap-2">
                    <i class="fas fa-file-medical text-teal-400"></i> Discharge Summary
                </h3>
                <button onclick="safeToggle('summary-modal', true)" class="text-white/80 hover:text-white">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div class="p-6">
                <div id="summary-content" class="bg-slate-50 border border-slate-200 rounded-2xl p-6 text-sm text-slate-700 h-96 overflow-y-auto whitespace-pre-wrap font-serif leading-relaxed shadow-inner">
                    </div>
                
                <div class="pt-4 flex justify-between items-center border-t border-slate-100 mt-2 no-print">
                    <span class="text-xs text-slate-400 font-medium"><i class="fas fa-check mr-1"></i> Ready to print</span>
                    <div class="flex gap-2">
                        <button onclick="window.print()" class="bg-slate-200 hover:bg-slate-300 text-slate-700 px-5 py-2 rounded-xl font-bold transition-all flex items-center gap-2 text-sm">
                            <i class="fas fa-print"></i> Print
                        </button>
                        <button onclick="copySummary()" class="bg-teal-600 hover:bg-teal-700 text-white px-5 py-2 rounded-xl font-bold shadow-lg shadow-teal-200 flex items-center gap-2 transition-all text-sm">
                            <i class="fas fa-copy"></i> Copy Text
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="fixed bottom-6 right-6 bg-slate-800 text-white px-5 py-3 rounded-xl shadow-2xl transform translate-y-32 opacity-0 transition-all duration-300 z-[100] flex items-center gap-3 border-l-4 border-teal-400">
        <i class="fas fa-check-circle text-teal-400 text-lg"></i>
        <span id="toast-msg" class="font-medium text-xs">Action Successful</span>
    </div>

    <script type="module" src="script.js"></script>

</body>
</html>